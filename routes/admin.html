<!DOCTYPE html>
<html>
	<link rel="stylesheet" type="text/css" href="../styles/popup.css">
    <head>
        <meta charset="utf8">
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script>
			var catalogRule;
			var catalogs;
			var catalogsByName = {};
			var $catalogs = {};
			var $objectSubjects = {};
			var catalogsLoaded = 0;
			var catalogNames = [];
			var requiredCourseIds = []; // This is an array initialized at the start of every modify popup
			var applicableCourseIds = [];
			var minors;
			var $minorsSubjectSelect = {};
			var selectedMinors = [];
			var certificates;
			var forms;
			var $certificatesSubjectSelect = {};
			var $formsSubjectSelect = {};
			var selectedCertificates = [];
			var selectedForms = [];
			var selectedOverrides = [];
			var selectedCatalogs = [];
			var modifyData = [];
			var objectsParam = [];
			var degreeProgramIds = [];
			var mergedCommittees = [];
			var currentCommittee; // This is used to keep track of the current committe when performing committee operations
			var removedCatalogs = [];
			var addedCatalogs = [];
			var addedRequiredCourses = [];
			var removedRequiredCourses = [];
			var addedCourseOverrides = [];
			var removedCourseOverrides = [];
			var addedMinors = [];
			var removedMinors = [];
			var addedForms = [];
			var removedForms = [];
			var addedCertificates = [];
			var removedCertificates = [];
			var addedRestrictedCourses = [];
			var removedRestrictedCourses = [];
			
			$(document).ready(function(){			
				var xhr = new XMLHttpRequest();
				xhr.addEventListener("load", degreeHandlerInit);
				xhr.open("GET", "../scripts/degreePrograms.php");
				xhr.send();
				
				$("#deleteForm").click(function() {
					if(confirm("Are you sure you want to delete this program? Press OK to delete")) {
						$.ajax({
							type: "POST",
							url: "../scripts/deleteObject.php",
							data: {idObject : $(this).attr("idobjects") },
							//dataType: "json",
							success: function(json) {
								location.reload();
							},
							error: function(xhr, ajaxOptions, thrownError) {
								console.log(thrownError);
							}
						});
					} 
				});
				
				// Event handler for radio change (shows container to specify restricted catalog courses)
				$("input[name='restrictedOptions']").change(function() {
					if($(this).val() == "restrictedCourses") {
						$("#restrictedCatalogOptions").show();
					} else {
						$("#restrictedCatalogOptions").hide();
					}
				});
				
				$("#addNewCommitteeMemberButton").click(function() {
					var $committeeTitle = $("#committeeTitle option:selected");
					var $committeeMember = $("#committeeMembers option:selected");
					var title = $committeeTitle.attr("id");
					var titleName = $committeeTitle.val();
					if($committeeMember.val() == "newMember") {
						var firstName = $("#firstName").val();
						var lastName = $("#lastName").val();
						if(firstName == "" || lastName == "") {
							alert("Name is required");
							return false;
						}
						if(title == "") {
							alert("Title is required");
							return false;
						}
						$.ajax({
							type: "POST",
							url: "../scripts/addNewCommitteeMember.php",
							data: { firstName : firstName, lastName: lastName },
							dataType: "json",
							success: function(json) {
								addCommitteeMemberToSelect(json, firstName, lastName);
								addMemberToCommittee(json, currentCommittee, title, function(wasAdded) {
									if(wasAdded) {
										addCommitteeMemberToTable(json, firstName, lastName, titleName, title, currentCommittee);
									} else {
										alert("Unable to assign member to committee");
										return false;
									}
								});
							},
							error: function(xhr, ajaxOptions, thrownError) {
								console.log(thrownError);
							}
						});
					} else {
						var firstName = $committeeMember.attr("firstname");
						var lastName = $committeeMember.attr("lastname");
						var id = $committeeMember.attr("id");
						addMemberToCommittee(id, currentCommittee, title, function(wasAdded) {
							if(wasAdded) {
								addCommitteeMemberToTable(id, firstName, lastName, titleName, title, currentCommittee);
							} else {
								alert("Unable to assign member to committee");
								return false;
							}
						});
					}
				});
				
				$("#addNewItemButton").click(function() {
					console.log("Inside the button");
					var data = {};
					if($("#objectSubjects option:selected").val() === "newSubject") {
						data["subject"] = $("#newObjectSubject").val();
						if(data["subject"] === "") {
							alert("Subject name is required");
							return false;
						}
					} else {
						data["subject"] = $("#objectSubjects option:selected").val();
					}
					data["typeName"] = $("#newItemCategories option:selected").val();
					data["name"] = $("#newItemName").val();
					if(data["name"] === "") {
						alert("Name is required");
						return false;
					}
					console.log(data);
					$.ajax({
						type: "POST",
						url: "../scripts/addNewObject.php",
						data: data,
						//dataType: "json",
						success: function(json) {
							location.reload();
						},
						error: function(xhr, ajaxOptions, thrownError) {
							console.log(thrownError);
						}
					});
				});
				
				$("#committeeMembers").change(function() {
					if($(this).val() == "newMember") {
						$("#newCommitteeMemberContainer").show();
					} else {
						$("#newCommitteeMemberContainer").hide();
					}
				});
				
				$("#catalogList").change(function(){
					swapRequired($(this).val())
				});
				
				$("#catalogListOverrides").change(function(){
					swapOverride($(this).val())
				});
				
				$("#catalogListRestricted").change(function(){
					swapRestricted($(this).val());
				});
				
				$("#minorSubjectList").change(function(){
					$("#minorSelect").detach();
					$minorsSubjectSelect[$(this).val()].insertAfter($("#minorSelectLabel"));
				});
				
				$("#newItemCategories").change(function(){
					$("#objectSubjects").detach();
					$objectSubjects[$(this).val()].insertAfter($("#objectSubjectLabel"));
					if($("#objectSubects option:selected").val() === "newSubject") {
						$("#newObjectSubjectSpan").show();
					} else {
						$("#newObjectSubjectSpan").hide();
					}
				});
				
				$("#addCommitteeButton").click(function() {
					var committeeName = $("#committeesSelect option:selected").val();
					if(!mergedCommittees.includes(committeeName)) {
						mergeCommittees(currentCommittee, committeeName, true, function(wasSuccessful) {
							if(!wasSuccessful) {
								alert("Unable to merge committees");
							}
						});
						// Merging committees does not inherit the any committees the committee in question has merged, so pass false
						loadCommitteeMembers(committeeName, false, function(members) {
							addMergedCommitteeToList(committeeName);
							for(var index in members) {
								addCommitteeMemberToTable(members[index].id, members[index].firstName, members[index].lastName, members[index].title, members[index].titleId, members[index].committee);						
							}
							mergedCommittees.push(committeeName);
						});
					}
				});
				
				$("#addClassButtonOverrides").click(function(){
					var courseId = $("#overridesContainer > #courseList option:selected").val();
					if(!courseId) {
						return false;
					}
					if(!selectedOverrides.includes(courseId)) {
						selectedOverrides.push(courseId);
						if(removedCourseOverrides.includes(courseId)) {
							removedCourseOverrides = removedCourseOverrides.filter(function(id) {
								id != courseId;
							});
						} else {
							addedCourseOverrides.push(courseId);
						}
						var courseOverrideInfo = {};
						courseOverrideInfo.maxCount = 1;
						courseOverrideInfo.minGrade = catalogRule["Degree Program"].minGrade;
						courseOverrideInfo.minHours = catalogs[courseId].lowHours;
						courseOverrideInfo.maxHours = catalogs[courseId].highHours;
						attachCourseOverrideEntry(courseId, courseOverrideInfo);
					}
				});
				
				$("#addCatalogButton").click(function() {
					var catalogName = $("#applicableCatalogsSelect option:selected").val();
					if(!selectedCatalogs.includes(catalogName)) {
						selectedCatalogs.push(catalogName);
						// Process the catalog name into the added array. If the catalog was previously removed but was readded then it will neither be added or removed in the database
						if(removedCatalogs.includes(catalogName)) {
							removedCatalogs = removedCatalogs.filter(function(name) {
								name != catalogName;
							});
						} else {
							addedCatalogs.push(catalogName);
						}
						$.ajax({
							type: "POST",
							url: "../scripts/courseCatalog.php",
							data: {catalogName : catalogName},
							dataType: "json",
							success: function(json) {
								addNewCatalog(json, catalogName);
							},
							error: function(xhr, ajaxOptions, thrownError) {
								console.log(thrownError);
							}
						});
					}
				});
				
				//TODO modularize these click events into one
				$("#addClassButton").click(function(){
					var courseId = $("#requiredClasses > #courseList option:selected").val();
					if(!requiredCourseIds.includes(courseId)) {
						requiredCourseIds.push(courseId);
						if(removedRequiredCourses.includes(courseId)) {
							removedRequiredCourses = removedRequiredCourses.filter(function(id) {
								id != courseId;
							});
						} else {
							addedRequiredCourses.push(courseId);
						}
						var $removeButton = $("<input>", {
							id: courseId,
							type: "submit",
							name: "removeClassButton",
							value: "Remove"
						});
						$removeButton.click(removeRequiredHandler);
						$("#classsublist").append($("<li>",{
							text: catalogs[courseId].name,
							value: getCatalogName(courseId)
						}).append($removeButton));
					}
				});
				
				$("#addClassButtonRestricted").click(function(){
					var courseId = $("#restrictedCatalogOptions > #courseList option:selected").val();
					if(!courseId) {
						return false;
					}
					if(!applicableCourseIds.includes(courseId)) {
						applicableCourseIds.push(courseId);
						if(removedRestrictedCourses.includes(courseId)) {
							removedRestrictedCourses = removedRestrictedCourses.filter(function(id) {
								id != courseId;
							});
						} else {
							addedRestrictedCourses.push(courseId);
						}
						var $removeButton = $("<input>", {
							id: courseId,
							type: "submit",
							name: "removeRestrictedClassButton",
							value: "Remove"
						});
						$removeButton.click(removeRestrictedHandler);
						$("#restrictedCourseList").append($("<li>",{
							text: catalogs[courseId].name,
							value: getCatalogName(courseId)
						}).append($removeButton));
					}
				});
				
				$("#addMinorButton").click(function(){
					var minorId = parseInt($("#minorSelect option:selected").val());
					if(!selectedMinors.includes(minorId)) {
						selectedMinors.push(minorId);
						if(removedMinors.includes(minorId)) {
							removedMinors = removedMinors.filter(function(id) {
								id != minorId;
							});
						} else {
							addedMinors.push(minorId);
						}
						var $removeButton = $("<input>", {
							id: minorId,
							type: "submit",
							name: "removeMinorButton",
							value: "Remove"
						});
						$removeButton.click(removeMinorHandler);
						$("#minorList").append($("<li>",{
							text: minors[minorId].name
						}).append($removeButton));
					}
				});
				
				$("#addCertificateButton").click(function(){
					var certificateId = parseInt($("#certificateSelect option:selected").val());
					if(!selectedCertificates.includes(certificateId)) {
						selectedCertificates.push(certificateId);
						if(removedCertificates.includes(certificateId)) {
							removedCertificates = removedCertificates.filter(function(id) {
								id != certificateId;
							});
						} else {
							addedCertificates.push(certificateId);
						}
						var $removeButton = $("<input>", {
							id: certificateId,
							type: "submit",
							name: "removeCertificateButton",
							value: "Remove"
						});
						$removeButton.click(removeCertificateHandler);
						$("#certificateList").append($("<li>",{
							text: certificates[certificateId].name
						}).append($removeButton));
					}
				});
				
				$("#addFormButton").click(function(){
					var formId = parseInt($("#formSelect option:selected").val());
					if(!selectedForms.includes(formId)) {
						selectedForms.push(formId);
						if(removedForms.includes(formId)) {
							removedForms = removedForms.filter(function(id) {
								id != formId;
							});
						} else {
							addedForms.push(formId);
						}
						var $removeButton = $("<input>", {
							id: formId,
							type: "submit",
							name: "removeFormButton",
							value: "Remove"
						});
						$removeButton.click(removeFormHandler);
						$("#formList").append($("<li>",{
							text: forms[formId].name
						}).append($removeButton));
					}
				});

				$("#saveGlobal").click(function(){
					console.log("Inside save global");
					if(!$("#globalGrade")[0].checkValidity()){
						alert("Invalid Grade Format (Must be either empty or A+ to F)");
						return false;
					}
					if($("#globalGPA").val() < 0 || $("#globalGPA").val() > 4){
						alert("Invalid GPA (Must be between 0 and 4)");
						return false;
					}
					var typeName = $(this).attr("typename");
					$.ajax({
						type: "POST",
						url: "../scripts/saveGlobalRequirements.php",
						data: { Grade : $("#globalGrade").val(), GPA : $("#globalGPA").val(), typeName : typeName },
						dataType: "json",
						success: function(json) {
							alert("Saved Successfully");
						},
						error: function(msg){
							alert("Unable to save requirements");
						}
					});
				});
				

				
				$("#saveForm").click(function(){
					var idObjects = $(this).attr("idobjects");
					saveHours(idObjects, function(wasSuccessful) {
						if(wasSuccessful) {
							console.log("Hours by level changes successful");
						} else {
							console.log("Error saving hours by level");
						}
					});
					saveObjectInformation(idObjects, function(wasSuccessful) {
						if(wasSuccessful) {
							console.log("Object information saved successfully");
						} else {
							console.log("Error saving object information");
						}
					});
					return;
					if(removedCatalogs.length > 0 || addedCatalogs.length > 0) {
						saveCatalogs(idObjects, function(wasSuccessful) {
							if(wasSuccessful) {
								console.log("Catalogs saved successfully");
							} else {
								console.log("Error saving catalogs");
							}
						});
					}
					if(addedRequiredCourses.length > 0 || removedRequiredCourses.length > 0) {
						saveRequiredCourses(idObjects, function(wasSuccessful) {
							if(wasSuccessful) {
								console.log("Required courses saved");
							} else {
								console.log("Error saving required courses");
							}
						});
					}
					if(addedCourseOverrides.length > 0 || removedCourseOverrides.length > 0 || $("#courseOverrideList li").length > 0) {
						saveCourseOverrides(idObjects, function(wasSuccessful) {
							if(wasSuccessful) {
								console.log("Course overrides saved");
							} else {
								console.log("Error saving course overrides");
							}
						});
					}
					// Process Minors and Catalogs if the objectId belongs to a degree program
					if(degreeProgramIds.includes(idObjects)) {
						if(addedMinors.length > 0 || removedMinors.length > 0) {
							saveObjectMapping(idObjects, removedMinors, addedMinors, function(wasSuccessful) {
								if(wasSuccessful) {
									console.log("Minors saved");
								} else {
									console.log("Error saving minors");
								}
							});
						}
						if(addedCertificates.length > 0 || removedCertificates.length > 0) {
							saveObjectMapping(idObjects, removedCertificates, addedCertificates, function(wasSuccessful) {
								if(wasSuccessful) {
									console.log("Certificates saved");
								} else {
									console.log("Error saving certificates");
								}
							});
						}
						if(addedForms.length > 0 || removedForms.length > 0) {
							saveObjectMapping(idObjects, removedForms, addedForms, function(wasSuccessful) {
								if(wasSuccessful) {
									console.log("Certificates saved");
								} else {
									console.log("Error saving certificates");
								}
							});
						}
					} else { // Otherwise the objectId is a nondegree program and can have restricted applicable courses
						saveRestrictedCourses(idObjects, function(wasSuccessful) {
							if(wasSuccessful) {
								console.log("Applicable courses saved");
							} else {
								console.log("Error saving applicable courses");
							}
						});	
						return;
					}
					resetAddedRemovedValues();
				});
            });
            
			function saveCatalogs(objectId, callback) {
				$.ajax({
					type: "POST",
					url: "../scripts/saveCatalogs.php",
					data: { removedCatalogs: removedCatalogs, addedCatalogs: addedCatalogs, objectId: objectId },
					//dataType: "json",
					success: function(json) {
						console.log(json);
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			}
			
			function saveRequiredCourses(objectId, callback) {
				console.log("Calling save required");
				$.ajax({
					type: "POST",
					url: "../scripts/saveRequiredCourses.php",
					data: { removedRequiredCourses: removedRequiredCourses, addedRequiredCourses: addedRequiredCourses, objectId: objectId },
					//dataType: "json",
					success: function(json) {
						console.log(json);
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			}
			
			function saveCourseOverrides(objectId, callback) {
				// Iterate through the current course overrides. If the course override is new and needs to be inserted into the database then collect information
				// in the newOverrides array, otherwise if the course is an existing override then add then collect the information in the modifiedOverrides array
				var newOverrides = [];
				var modifiedOverrides = [];
				$("#courseOverrideList li").each(function(index, value) {
					var overrideInfo = {};
					var courseId = $(this).children("input[type='submit']").attr("id");
					overrideInfo.courseId = courseId;
					overrideInfo.timesCountable = $(this).children("input[id='overrideCount']").val();
					overrideInfo.minGrade = $(this).children("input[id='overrideGrade']").val();
					overrideInfo.minHours = $(this).children("input[id='overrideLowHours']").val();
					overrideInfo.maxHours = $(this).children("input[id='overrideHighHours']").val();
					if(addedCourseOverrides.includes(courseId)) {
						newOverrides.push(overrideInfo);
					} else {
						modifiedOverrides.push(overrideInfo);
					}
				});
				$.ajax({
					type: "POST",
					url: "../scripts/saveCourseOverrides.php",
					data: { removedCourseOverrides: removedCourseOverrides, addedCourseOverrides: newOverrides, modifiedOverrides: modifiedOverrides, objectId: objectId },
					//dataType: "json",
					success: function(json) {
						console.log(json);
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			};
			
			// This function will save changes to objects that are mapped to an object. The intended use of this function is to change what minors, certificates, and forms are
			// mapped to a degree program.
			function saveObjectMapping(objectId, removedObjects, addedObjects, callback) {
				console.log(removedObjects);
				console.log(addedObjects);
				$.ajax({
					type: "POST",
					url: "../scripts/saveObjectMapping.php",
					data: { removedIds: removedObjects, addedIds: addedObjects, objectId: objectId },
					//dataType: "json",
					success: function(json) {
						console.log(json);
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			}
			
			function saveRestrictedCourses(objectId, callback) {
				var restrictedCourseValue = $("input[name='restrictedOptions']:checked").val();
				var restrictedCourseIds;
				var removeCourseIds;
				console.log(restrictedCourseValue);
				if(restrictedCourseValue == "allCourses") {
					restrictedCourseIds = Object.keys(catalogs);
					removeCourseIds = applicableCourseIds.concat(removedRestrictedCourses);
				} else if(restrictedCourseValue == "requiredOnlyCourses") {
					console.log("Option is required only");
					restrictedCourseIds = [];
					console.log(applicableCourseIds);
					removeCourseIds = applicableCourseIds.concat(removedRestrictedCourses);
					console.log(removeCourseIds);
				} else {
					restrictedCourseIds = addedRestrictedCourses;
					removeCourseIds = removedRestrictedCourses;
				}
				$.ajax({
					type: "POST",
					url: "../scripts/saveRestrictedCourses.php",
					data: { removedCourses: removeCourseIds, addedCourses: restrictedCourseIds, objectId: objectId },
					//dataType: "json",
					success: function(json) {
						console.log(json);
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			}
			
			function saveHours(objectId, callback) {
				var addData = [];
				var modifyData = [];
				var modifyDataObjectSpecific = [];
				var removeData = [];
				var hoursForm = {};
				//var catalogFormChange = {Hrs400Min: false, Hrs400Max: false, Hrs500Min: false, Hrs500Max: false, Hrs600Min: false, Hrs600Max:false}
				hoursForm.Hrs400MinObj = {
					hour: 400,
					cap: 'minimum',
					val: $("#400HrsMin").val(),
					type: $("input[name='400HrsMinOption']:checked").val()
				}
				hoursForm.Hrs400MaxObj = {
					hour: 400,
					cap: 'maximum',
					val: $("#400HrsMax").val(),
					type: $("input[name='400HrsMaxOption']:checked").val()
				}
				hoursForm.Hrs500MinObj = {
					hour: 500,
					cap: 'minimum',
					val: $("#500HrsMin").val(),
					type: $("input[name='500HrsMinOption']:checked").val()
				}
				hoursForm.Hrs500MaxObj = {
					hour: 500,
					cap: 'maximum',
					val: $("#500HrsMax").val(),
					type: $("input[name='500HrsMaxOption']:checked").val()
				}
				hoursForm.Hrs600MinObj = {
					hour: 600,
					cap: 'minimum',
					val: $("#600HrsMin").val(),
					type: $("input[name='600HrsMinOption']:checked").val()
				}
				hoursForm.Hrs600MaxObj = {
					hour: 600,
					cap: 'maximum',
					val: $("#600HrsMax").val(),
					type: $("input[name='600HrsMaxOption']:checked").val()
				}
				hoursForm.HrsTransferMaxObj = {
					hour: "Transfer",
					cap: 'maximum',
					val: $("#trhrs").val(),
					type: $("input[name='TransferHrsMaxOption']:checked").val()
				}
				hoursForm.HrsOutsideMaxObj = {
					hour: "Outside",
					cap: 'maximum',
					val: $("#ohrs").val(),
					type: $("input[name='OutsideHrsMaxOption']:checked").val()
				}

				// Check to see if an hour type is not provided for any hour field with a value
				if(hoursForm.Hrs400MinObj.val != "" && !hoursForm.Hrs400MinObj.type){
					alert("Fixed or Variable option must be selected for 400 Min Hours");
				}
				if(hoursForm.Hrs400MaxObj.val != "" && !hoursForm.Hrs400MaxObj.type){
					alert("Fixed or Variable option must be selected for 400 Max Hours");
				}
				if(hoursForm.Hrs500MinObj.val != "" && !hoursForm.Hrs500MinObj.type){
					alert("Fixed or Variable option must be selected for 500 Min Hours");
				}
				if(hoursForm.Hrs500MaxObj.val != "" && !hoursForm.Hrs500MaxObj.type){
					alert("Fixed or Variable option must be selected for 500 Max Hours");
				}
				if(hoursForm.Hrs600MinObj.val != "" && !hoursForm.Hrs600MinObj.type){
					alert("Fixed or Variable option must be selected for 600 Min Hours");
				}
				if(hoursForm.Hrs600MaxObj.val != "" && !hoursForm.Hrs600MaxObj.type){
					alert("Fixed or Variable option must be selected for 600 Max Hours");
				}
				if(hoursForm.HrsTransferMaxObj.val != "" && !hoursForm.HrsTransferMaxObj.type){
					alert("Fixed or Variable option must be selected for Transfer Max Hours");
				}
				if(hoursForm.HrsOutsideMaxObj.val != "" && !hoursForm.HrsOutsideMaxObj.type){
					alert("Fixed or Variable option must be selected for Outside Max Hours");
				}
				
				// If the old value is defined then check to see if the database value needs to be modified or deleted

				checkHourUpdate($("#400HrsMin"), hoursForm.Hrs400MinObj, modifyData, removeData, addData);
				checkHourUpdate($("#400HrsMax"), hoursForm.Hrs400MaxObj, modifyData, removeData, addData);
				checkHourUpdate($("#500HrsMin"), hoursForm.Hrs500MinObj, modifyData, removeData, addData);
				checkHourUpdate($("#500HrsMax"), hoursForm.Hrs500MaxObj, modifyData, removeData, addData);
				checkHourUpdate($("#600HrsMin"), hoursForm.Hrs600MinObj, modifyData, removeData, addData);
				checkHourUpdate($("#600HrsMax"), hoursForm.Hrs600MaxObj, modifyData, removeData, addData);
				checkHourUpdate($("#trhrs"), hoursForm.HrsTransferMaxObj, modifyData, removeData, addData);
				checkHourUpdate($("#ohrs"), hoursForm.HrsOutsideMaxObj, modifyData, removeData, addData);

				console.log(modifyData);
				console.log(removeData);
				console.log(addData);
				if(addData.length > 0 || removeData.length > 0 || modifyData.length > 0) {
					$.ajax({
						type: "POST",
						url: "../scripts/saveHours.php",
						data: { removedHours: removeData, addedHours: addData, modifiedHours: modifyData, objectId: objectId },
						//dataType: "json",
						success: function(json) {
							console.log(json);
							callback(true);
						},
						error: function(xhr, ajaxOptions, thrownError) {
							console.log(thrownError);
							callback(false);
						}
					});
				}
			}
			
			function saveObjectInformation(objectId, callback) {
				var requiredHrs = $("#requiredHrs").val();
				var minGrade = $("#grade").val();
				var minGPA = $("#minimumGPA").val();
				oldValueGrade = $("#grade").attr("oldvalue");
				oldValueGPA = $("#minimumGPA").attr("oldvalue");
				oldValueRequired = $("#requiredHrs").attr("oldvalue");
				if(oldValueGrade != minGrade || oldValueGPA != minGPA || oldValueRequired != requiredHrs) {
					$.ajax({
						type: "POST",
						url: "../scripts/saveObjectInfo.php",
						data: { requiredHours: requiredHrs, minGrade: minGrade, minGPA: minGPA, objectId: objectId },
						//dataType: "json",
						success: function(json) {
							console.log(json);
							callback(true);
						},
						error: function(xhr, ajaxOptions, thrownError) {
							console.log(thrownError);
							callback(false);
						}
					});
				}
			}
			
			// This function will push the hourObject onto either the modifyData, removeData, or addData array depending on the values that
			// are changed when compared to the oldValue and oldType
			function checkHourUpdate($entry, hourObject, modifyData, removeData, addData) {
				var oldValue = $entry.attr("oldvalue");
				$entry.attr("oldvalue", hourObject.val);
				var oldType = $entry.attr("oldtype");
				$entry.attr("oldtype", hourObject.type);
				if(oldValue) {
					if(hourObject.val != "" && hourObject.val != oldValue) {
						modifyData.push(hourObject);
					} else if(hourObject.val == "" && oldValue != "") {
						removeData.push(hourObject);
					} else if(hourObject.type != oldType) {
						modifyData.push(hourObject);
					}
				} else { // Otherwise check to see if an hour value is inputted and needs to be added to the database
					if(hourObject.val != "") {
						addData.push(hourObject);
					}
				}
			}
			
			function addCommitteeTitleToSelect(id, title) {
				var $option = $("<option>", {
					id: id,
					value: title,
					text: title
				});
				$("#committeeTitle").append($option);
			}
			
			function addCommitteeMemberToSelect(id, firstName, lastName) {
				var $option = $("<option>", {
					value: "Member",
					id: id,
					firstname: firstName,
					lastname: lastName,
					text: firstName + " " + lastName
				});
				$("#committeeMembers").append($option);
			}
			
			function addCommitteeMemberToTable(id, firstName, lastName, title, titleId, subject) {
				var $row = $("<tr>", {
					value: subject,
					name: "tableEntry"
				});
				$row.append($("<td>", {
					id: "memberFirstName",
					text: firstName
				})).append($("<td>", {
					id: "memberLastName",
					text: lastName
				})).append($("<td>", {
					id: "memberTitle",
					text: title
				}));
				var $closeButton = $("<button>", {
					id: id,
					committee: subject,
					name: "removeMemberButton",
					title: titleId,
					text: "X"
				});
				$closeButton.click(removeCommitteeMemberHandler);
				$row.append($closeButton);
				$("#committeeTableBody").append($row);
			}
			
			function addMemberToCommittee(memberId, committeeName, title, callback) {
				$.ajax({
					type: "POST",
					url: "../scripts/addMemberToCommittee.php",
					data: { subject: committeeName, id: memberId, title: title },
					dataType: "json",
					success: function(json) {
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			}
			
			function addMergedCommitteeToList(committeeName) {
				var $removeButton = $("<button>", {
					committee: committeeName,
					name: "removeMergeButton",
					text: "X"
				});
				$removeButton.click(removeMergeHandler);
				$("#mergedCommitteesList").append($("<li>",{
					text: committeeName
				}).append($removeButton));
			}
			
			function swapRequired(catalogName) {
				$("#classListLabel + select").detach();
				if(catalogName) {
					$catalogs[catalogName].clone().insertAfter($("#classListLabel"));
				}
			}
			
			function swapOverride(catalogName) {
				$("#classListLabelOverrides + select").detach();
				if(catalogName) {
					$catalogs[catalogName].clone().insertAfter($("#classListLabelOverrides"));
				}
			}
			
			function swapRestricted(catalogName) {
				$("#classListLabelRestricted + select").detach();
				if(catalogName) {
					$catalogs[catalogName].clone().insertAfter($("#classListLabelRestricted"));
				}
			}
				
			function addNewCatalog(catalogArray, catalogName) {
				processCatalog(catalogArray, catalogName);
				if(Object.keys($catalogs).length === 1 || !$("#catalogList option:selected").val()) {
					$catalogs[catalogName].clone().insertAfter($("#classListLabel"));
					$catalogs[catalogName].clone().insertAfter($("#classListLabelOverrides"));
					$catalogs[catalogName].clone().insertAfter($("#classListLabelRestricted"));
				}
				var $removeButton = $("<input>",{
					id: catalogName,
					type: "submit",
					name: "removeCatalogButton",
					value: "Remove"
				});
				$removeButton.click(removeCatalogHandler);
				$("#applicableCatalogsList").append($("<li>",{
					text: catalogName
				}).append($removeButton));
				$("#catalogList, #catalogListOverrides, #catalogListRestricted").append($("<option>",{
					value: catalogName,
					text: catalogName
				}));
			}
			
			// This function will set two committees as merged in the database
			function mergeCommittees(committeeName1, committeeName2, merge, callback) {
				var url;
				if(merge) {
					url = "../scripts/mergeCommittees.php"
				} else {
					url = "../scripts/unmergeCommittees.php"
				}
				$.ajax({
					type: "POST",
					url: url,
					data: { committeeName1: committeeName1, committeeName2: committeeName2 },
					dataType: "json",
					success: function(json) {
						console.log(json);
						callback(true);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback(false);
					}
				});
			}
			
			// This function will retrieve the information for all committee members for the given committee. Callback returns the committe members
			function loadCommitteeMembers(committeeName, merge, callback) {
				var url;
				if(merge) {
					url = "../scripts/getCommitteeMembersBySubject.php";
				} else {
					url = "../scripts/getCommitteeMembersBySubjectWithoutMerge.php";
				}
				$.ajax({
					type: "POST",
					url: url,
					data: { committeeName: committeeName },
					dataType: "json",
					success: function(json) {
						callback(json);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback({});
					}
				});
			}
			
			function loadAllCommitteeMembers(callback) {
				$.ajax({
					type: "GET",
					url: "../scripts/getAllCommitteeMembers.php",
					dataType: "json",
					success: function(json) {
						callback(json);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback({});
					}
				});
			}
			
			function loadCommitteeTitles(callback) {
				$.ajax({
					type: "GET",
					url: "../scripts/getCommitteeTitles.php",
					dataType: "json",
					success: function(json) {
						callback(json);
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						callback({});
					}
				});
			}
			
			function editCommitteeHandler() {
				currentCommittee = $(this).attr("value");
				
				// Hide the currentCommittee in the merge list. There should not be an option to merge a committee with itself
				$("#committeesSelect option[value='" + currentCommittee + "']").hide();
				$("#committeesSelect").val($("#committeesSelect option[value!='" + currentCommittee + "']").val());
				
				// Load in all members for the committee that is selected
				mergedCommittees = [];
				mergedCommittees.push(currentCommittee);

				loadCommitteeMembers($(this).attr("value"), true, function(members) {
					for(var index in members) {
						addCommitteeMemberToTable(members[index].id, members[index].firstName, members[index].lastName, members[index].title, members[index].titleId, members[index].committee);
						if(!mergedCommittees.includes(members[index].committee)) {
							addMergedCommitteeToList(members[index].committee);
							mergedCommittees.push(members[index].committee);
						}						
					}
				});
				
				// Load in the titles that a committee member may have
				loadCommitteeTitles(function(titles) {
					for(var id in titles) {
						addCommitteeTitleToSelect(id, titles[id]);
					}
				});
				
				// Load in every committee member regardless of whether this member is on the committee
				loadAllCommitteeMembers(function(members) {
					for(var index in members) {
						addCommitteeMemberToSelect(members[index].id, members[index].firstName, members[index].lastName);
					}
				});
				
				// Only show the new committee input fields if the option selected is New Member
				if($("#committeeMembers option:selected").val() == "newMember") {
					$("#newCommitteeMemberContainer").show();
				} else {
					$("#newCommitteeMemberContainer").hide();
				}
				var modal = document.getElementById('committeeModal');
				modal.style.display = "block";
			}
			
			function closeCommittee() {
				$("#mergedCommitteesList").empty();
				$("#committeesSelect option[value='" + currentCommittee + "']").show();
				$("#committeeMembers option[value!='newMember']").remove();
				$("#committeeTableBody tr[name='tableEntry']").remove();
				var modal = document.getElementById('committeeModal');
				modal.style.display = "none";
			}
			
			function removeMergeHandler() {
				var committeeName = $(this).attr("committee");
				var mergedListItem = $(this).parent();
				mergeCommittees(currentCommittee, committeeName, false, function(wasSuccessful) {
					if(!wasSuccessful) {
						alert("Unable to separate committees");
					} else {
						// If the unmerge is successful then remove the merged committee from the list
						mergedListItem.remove();
						mergedCommittees = mergedCommittees.filter(function(name) {
							return name != committeeName;
						});
						$("#committeeTableBody tr[value='" + committeeName + "']").remove();
					}
				});
			}
			
			function removeCommitteeMemberHandler() {
				var memberId = $(this).attr("id");
				var committee = $(this).attr("committee");
				var title = $(this).attr("title");
				var $button = $(this);
				$.ajax({
					type: "POST",
					url: "../scripts/removeFromCommittee.php",
					data: { id: memberId, committee: committee, title: title },
					dataType: "json",
					success: function(json) {
						console.log("success");
						$button.parent().remove();
					},
					error: function(xhr, ajaxOptions, thrownError) {
						console.log(thrownError);
						alert("Unable to remove from committee");
						return false;
					}
				});
			}
			
			// TODO modularize these event handlers into one
			function removeCatalogHandler() {
				var catalogName = $(this).attr("id");
				$(this).parent().remove();
				selectedCatalogs = selectedCatalogs.filter(function(name) {
					return name != catalogName;
				});
				if(addedCatalogs.includes(catalogName)) {
					addedCatalogs = addedCatalogs.filter(function(name) {
						name != catalogName;
					});
				} else {
					removedCatalogs.push(catalogName);
				}
				// Remove all required courses from the removed catalog
				$("#requiredClasses li[value='" + catalogName + "']").each(function(index, value) {
					var courseId = $(this).children("input[type='submit']").attr("id");
					requiredCourseIds = requiredCourseIds.filter(function(id){ 
						return id != courseId;
					});
					if(addedRequiredCourses.includes(courseId)) {
						addedRequiredCourses = addedRequiredCourses.filter(function(id) {
							id != courseId;
						});
					} else {
						removedRequiredCourses.push(courseId);
					}
					$(this).remove();
				});
				// Remove all course overrides from the removed catalog
				$("#overridesContainer li[value='" + catalogName + "']").each(function(index, value) {
					var courseId = $(this).children("input[type='submit']").attr("id");
					selectedOverrides = selectedOverrides.filter(function(id){
						return id != courseId;
					});
					if(addedCourseOverrides.includes(courseId)) {
						addedCourseOverrides = addedCourseOverrides.filter(function(id) {
							id != courseId;
						});
					} else {
						removedCourseOverrides.push(courseId);
					}
					$(this).remove();
				});
				// Remove all applicable courses from the removed catalog
				$("#restrictedCourseList li[value='" + catalogName + "']").each(function(index, value) {
					var courseId = $(this).children("input[type='submit']").attr("id");
					applicableCourseIds = applicableCourseIds.filter(function(id){
						return id != courseId;
					});
					if(addedRestrictedCourses.includes(courseId)) {
						addedRestrictedCourses = addedRestrictedCourses.filter(function(id) {
							id != courseId;
						});
					} else {
						removedRestrictedCourses.push(courseId);
					}
					$(this).remove();
				});
				// Remove the catalog from the select options
				var swapOverrideSelect = $("#catalogListOverrides option:selected").val() == catalogName;
				var swapRequiredSelect = $("#catalogList option:selected").val() == catalogName;
				var swapRestrictedSelect = $("#catalogListRestricted option:selected").val == catalogName;
				$("#catalogListOverrides option[value='" + catalogName + "']").remove();
				$("#catalogList option[value='" + catalogName + "']").remove();
				$("#catalogListRestricted option[value='" + catalogName + "']").remove();
				// If the catalog to remove was selected before the removal then the course select will need to be swapped
				if(swapOverrideSelect) {
					swapOverride($("#catalogListOverrides option:selected").val());
				}
				if(swapRequiredSelect) {
					swapRequired($("#catalogList option:selected").val());
				}
				if(swapRestrictedSelect) {
					swapRestricted($("#catalogListRestricted option:selected").val());
				}
			}
			
			function removeOverrideHandler() {
				var courseId = $(this).attr("id");
				selectedOverrides = selectedOverrides.filter(function(id) {
					return id != courseId;
				});
				if(addedCourseOverrides.includes(courseId)) {
					addedCourseOverrides = addedCourseOverrides.filter(function(id) {
						id != courseId;
					});
				} else {
					removedCourseOverrides.push(courseId);
				}
				$(this).parent().remove();
			}
			
			function removeRequiredHandler() {
				var courseId = $(this).attr("id");
				requiredCourseIds = requiredCourseIds.filter(function(id) {
					return id != courseId;
				});
				if(addedRequiredCourses.includes(courseId)) {
					addedRequiredCourses = addedRequiredCourses.filter(function(id) {
						id != courseId;
					});
				} else {
					removedRequiredCourses.push(courseId);
				}
				$(this).parent().remove();
			}
			
			function removeRestrictedHandler() {
				var courseId = $(this).attr("id");
				applicableCourseIds = applicableCourseIds.filter(function(id) {
					return id != courseId;
				});
				if(addedRestrictedCourses.includes(courseId)) {
					addedRestrictedCourses = addedRestrictedCourses.filter(function(id) {
						id != courseId;
					});
				} else {
					removedRestrictedCourses.push(courseId);
				}
				$(this).parent().remove();
			}
			
			function removeMinorHandler() {
				var minorId = $(this).attr("id");
				selectedMinors = selectedMinors.filter(function(id) {
					return id != minorId;
				});
				if(addedMinors.includes(minorId)) {
					addedMinors = addedMinors.filter(function(id) {
						id != minorId;
					});
				} else {
					removedMinors.push(minorId);
				}
				$(this).parent().remove();
			}
			
			function removeCertificateHandler() {
				var certificateId = $(this).attr("id");
				selectedCertificates = selectedCertificates.filter(function(id) {
					return id != certificateId;
				});
				if(addedCertificates.includes(certificateId)) {
					addedCertificates = addedCertificates.filter(function(id) {
						id != certificateId;
					});
				} else {
					removedCertificates.push(certificateId);
				}
				$(this).parent().remove();
			}
			
			function removeFormHandler() {
				var formId = $(this).attr("id");
				selectedForms = selectedForms.filter(function(id) {
					return id != formId;
				});
				if(addedForms.includes(formId)) {
					addedForms = addedForms.filter(function(id) {
						id != formId;
					});
				} else {
					removedForms.push(formId);
				}
				$(this).parent().remove();
			}
			
			function degreeHandlerInit() {
				degreeHandler(JSON.parse(this.response), true);
				
				// Once all the degree programs are loaded add the event handler for editing committees
				$("li[name='editCommittee']").click(editCommitteeHandler);
				var xhr = new XMLHttpRequest();
				xhr.addEventListener("load", nonDegreeHandlerInit);
				xhr.open("GET", "../scripts/nondegreeObjects.php");
				xhr.send();
			}
			
			function nonDegreeHandlerInit() {
				degreeHandler(JSON.parse(this.response), false);
				$("button[name='modifyButton']").click(function(){
					if(degreeProgramIds.includes($(this).val())) {
						$("#additionalOptionsContainer").show();
						$("#restrictedCatalog").hide();
					} else {
						$("#additionalOptionsContainer").hide();
						$("#restrictedCatalog").show();
					}
					$.ajax({
						type: "POST",
						url: "../scripts/requirements.php",
						data: { idObjects: $(this).val()},
						dataType: "json",
						success: function(json) {
							popupHandler(json);
						}
					});
				});
				
				$("button[name='modifyGlobal']").click(function(){
					var typeName = $(this).val();
					$.ajax({
						type: "POST",
						url: "../scripts/globalRequirements.php",
						data: { typeName: $(this).val()},
						dataType: "json",
						success: function(json) {
							popupHandlerGlobal(json, typeName);
						},
						error: function(xhr, ajaxOptions, thrownError) {
							console.log(thrownError);
							return false;
						}
					});
				});
				// Initialize page contents with select lists and add buttons
				for(var index in $objectSubjects) {
					$objectSubjects[index].change(function(){
						if($(this).val() === "newSubject") {
							$("#newObjectSubjectSpan").show();
						} else {
							$("#newObjectSubjectSpan").hide();
						}
					});
				}
				$objectSubjects[$("#newItemCategories option:selected").val()].insertAfter($("#objectSubjectLabel"));
				if($("#objectSubects option:selected").val() === "newSubject") {
					$("#newObjectSubjectSpan").show();
				}
				var $addItemButton = $("<button>", {
					name: "addNewItem",
					text: "Add New Item"
				});
				$addItemButton.click(function() {
					popupHandlerAddNewItem();
				});
				$("#listContainer").append($("<li>", {
					name: "addNewItem"
				}).append($addItemButton));
				
			}
			
			
			/**
			param: programs - Array of programs to process into the list. This will be done according to the subject of the program
			param: showEditCatalog - If true this will add the option to edit the catalog for any subjects
			*/
			function degreeHandler(programs, showEditCatalog) {
				var degreePrograms = programs;
				console.log(degreePrograms);
				var $degreeSubjects;
				var $degreeOptions;

				// Iterate through all degree programs (Masters,PhD,etc) and add to DOM
				for(var degreeName in degreePrograms) {
					$("#newItemCategories").append($("<option>", {
						value: degreeName,
						text: degreeName
					}));
					$("#listContainer").append($("<li>", {
						value: degreeName
					}).append($("<label>", {
						text: degreeName
					})));
					$("#listContainer").append($("<li>", {
						value: "globalRequirements"
					}).append($("<label>", {
						text: "Global Requirements"
					})).append($("<button>", {
						value: degreeName,
						name: "modifyGlobal",
						text: "Modify"
					})));
					
					var $subjects = $("<select>", {
						id: "objectSubjects"
					});

					// Create nested list under each degree program with the subject, e.g., Computer Science 
					$degreeSubjects = $("<ul id='subjectList'>");
					console.log(degreePrograms[degreeName]);
					for(var degreeSubject in degreePrograms[degreeName]) {
					
						$degreeSubjects.append($("<li>", {
							text: degreeSubject
						}));
						var $subjectOption = $("<option>", {
							value: degreeSubject,
							text: degreeSubject
						});
						$subjects.append($subjectOption);
						
						$degreeOptions = $("<ul id='optionList'>");
						
						// If the catalog is set to be shown then add an item to edit the catalog. All degree program subjects have catalogs and they all
						// have graudate committees as well so add an item for editing the graduate committee
						if(showEditCatalog) {
							$degreeOptions.append($("<li>", {
								name: "catalog"
							}).append($("<a>", {
								href: "addremove.html",
								text: "Edit Course Catalog",
								onclick: "document.cookie = 'program=" + degreeSubject + "'"
							})));
							$degreeOptions.append($("<li>", {
								name: "editCommittee",
								value: degreeSubject
							}).append($("<a>", {
								text: "Edit Graduate Committee",
								style: "cursor:pointer"
							})));
						}
						
						for(var degreeOption in degreePrograms[degreeName][degreeSubject]) {
							$degreeOptions.append($("<li>", {
								value: degreeOption,
							}).append($("<label>", {
								text: degreeOption
							})).append($("<button>", {
								value: degreePrograms[degreeName][degreeSubject][degreeOption],
								name: "modifyButton",
								text: "Modify"	
							})));
							// Add the ID to the degreeProgram ID list. This will be used to display additional options if the object ID is a degree program
							if(degreeName === "Masters" || degreeName === "PhD") {
								if(!catalogNames.includes(degreeSubject)) {
									$("#applicableCatalogsSelect").append($subjectOption.clone());
									$("#committeesSelect").append($subjectOption);
									catalogNames.push(degreeSubject);
								}
								degreeProgramIds.push(degreePrograms[degreeName][degreeSubject][degreeOption]);
							}
						} 
						$degreeSubjects.append($degreeOptions);
					}
					$subjects.append($("<option>", {
						value: "newSubject",
						text: "New Subject"
					}));
					$objectSubjects[degreeName] = $subjects;
					$("#listContainer").append($degreeSubjects);
				}
				
			}

			function popupHandlerAddNewItem() {
				var modal = document.getElementById('addNewItemModal');
				modal.style.display = "block";
			}
			
			// This function will initialize the contents of the global requirements popup. It will display the popup and populate the min grade and GPA fields
			function popupHandlerGlobal(globalRequirements, typeName) {
				var modal = document.getElementById('globalModal');
				modal.style.display = "block";
				$("#globalGrade").val(globalRequirements.minGrade);
				$("#globalGPA").val(globalRequirements.minGPA);
				$("#saveGlobal").attr("typeName", typeName);
				console.log(globalRequirements);
			}
			
			function resetAddedRemovedValues() {
				removedCatalogs = [];
				addedCatalogs = [];
				addedRequiredCourses = [];
				removedRequiredCourses = [];
				addedCourseOverrides = [];
				removedCourseOverrides = [];
				addedMinors = [];
				removedMinors = [];
				addedForms = [];
				removedForms = [];
				addedCertificates = [];
				removedCertificates = [];
				addedRestrictedCourses = [];
				removedRestrictedCourses = [];
			}
			
			function popupHandler(json){
				catalogRule = json;
				catalogsLoaded = 0;
				catalogs = null;
				$catalogs = {};
				$minorsSubjectSelect = {};
				$certificatesSubjectSelect = {};
				$formsSubjectSelect = {};
				requiredCourseIds = [];
				selectedMinors = [];
				selectedCertificates = [];
				selectedForms = [];
				resetAddedRemovedValues();
				$("#deleteForm").attr("idobjects", catalogRule["Degree Program"].id);
				$("#saveForm").attr("idobjects", catalogRule["Degree Program"].id);
				console.log(catalogRule);

				var modal = document.getElementById('myModal');
				modal.style.display = "block";
				$("#requiredHrs").val(catalogRule["Degree Program"].requiredHours);
				$("#requiredHrs").val(catalogRule["Degree Program"].requiredHours);
				if(catalogRule["Degree Program"].hours400) {
					if(catalogRule["Degree Program"].hours400.minimum) {
						$("#400HrsMin").val(catalogRule["Degree Program"].hours400.minimum.hours);
						$("#400HrsMin").attr("oldvalue", catalogRule["Degree Program"].hours400.minimum.hours);
						$("input[name='400HrsMinOption']").val([catalogRule["Degree Program"].hours400.minimum.type]);
						$("#400HrsMin").attr("oldtype", catalogRule["Degree Program"].hours400.minimum.type);
					}
					if(catalogRule["Degree Program"].hours400.maximum) {
						$("#400HrsMax").val(catalogRule["Degree Program"].hours400.maximum.hours);
						$("#400HrsMax").attr("oldvalue", catalogRule["Degree Program"].hours400.maximum.hours);
						$("input[name='400HrsMaxOption']").val([catalogRule["Degree Program"].hours400.maximum.type]);
						$("#400HrsMax").attr("oldtype", catalogRule["Degree Program"].hours400.maximum.type);
					}
				}
				if(catalogRule["Degree Program"].hours500) {
					if(catalogRule["Degree Program"].hours500.minimum) {
						$("#500HrsMin").val(catalogRule["Degree Program"].hours500.minimum.hours);
						$("#500HrsMin").attr("oldvalue", catalogRule["Degree Program"].hours500.minimum.hours);
						$("input[name='500HrsMinOption']").val([catalogRule["Degree Program"].hours500.minimum.type]);
						$("#500HrsMin").attr("oldtype", catalogRule["Degree Program"].hours500.minimum.type);
					}if(catalogRule["Degree Program"].hours500.maximum) {
						$("#500HrsMax").val(catalogRule["Degree Program"].hours500.maximum.hours);
						$("#500HrsMax").attr("oldvalue", catalogRule["Degree Program"].hours500.maximum.hours);
						$("input[name='500HrsMaxOption']").val([catalogRule["Degree Program"].hours500.maximum.type]);
						$("#500HrsMax").attr("oldtype", catalogRule["Degree Program"].hours500.maximum.type);
					}
				}
				if(catalogRule["Degree Program"].hours600) {
					if(catalogRule["Degree Program"].hours600.minimum) {
						$("#600HrsMin").val(catalogRule["Degree Program"].hours600.minimum.hours);
						$("#600HrsMin").attr("oldvalue", catalogRule["Degree Program"].hours600.minimum.hours);
						$("input[name='600HrsMinOption']").val([catalogRule["Degree Program"].hours600.minimum.type]);
						$("#600HrsMin").attr("oldtype", catalogRule["Degree Program"].hours600.minimum.type);
					}
					if(catalogRule["Degree Program"].hours600.maximum) {
						$("#600HrsMax").val(catalogRule["Degree Program"].hours600.maximum.hours);
						$("#600HrsMax").attr("oldvalue", catalogRule["Degree Program"].hours600.maximum.hours);
						$("input[name='600HrsMaxOption']").val([catalogRule["Degree Program"].hours600.maximum.type]);
						$("#600HrsMax").attr("oldtype", catalogRule["Degree Program"].hours600.maximum.type);
					}
				}
				if(catalogRule["Degree Program"].hoursTransfer) {
					if(catalogRule["Degree Program"].hoursTransfer.maximum) {                     
						$("#trhrs").val(catalogRule["Degree Program"].hoursTransfer.maximum.hours);
						$("#trhrs").attr('oldvalue',catalogRule["Degree Program"].hoursTransfer.maximum.hours);
						$("input[name='TransferHrsMaxOption']").val([catalogRule["Degree Program"].hoursTransfer.maximum.type]);
						$("#trhrs").attr("oldtype", catalogRule["Degree Program"].hoursTransfer.maximum.type);
					}
				}
				if(catalogRule["Degree Program"].hoursOutside) {
					if(catalogRule["Degree Program"].hoursOutside.maximum) {                     
						$("#ohrs").val(catalogRule["Degree Program"].hoursOutside.maximum.hours);
						$("#ohrs").attr('oldvalue',catalogRule["Degree Program"].hoursOutside.maximum.hours);
						$("input[name='OutsideHrsMaxOption']").val([catalogRule["Degree Program"].hoursOutside.maximum.type]);
						$("#ohrs").attr("oldtype", catalogRule["Degree Program"].hoursOutside.maximum.type);
					}
				}
				$("#grade").val(catalogRule["Degree Program"].minGrade);
				$("#grade").attr("oldvalue", catalogRule["Degree Program"].minGrade);
				$("#minimumGPA").val(catalogRule["Degree Program"].minGPA);
				$("#minimumGPA").attr("oldvalue", catalogRule["Degree Program"].minGPA);
				// Load in all the catalogs for the program. This is done before setting information like required courses because the catalog information needs
				// to be known in order to retireve the course information.
				selectedCatalogs = [];
				catalogsByName = {};
				for(var i in catalogRule["Catalogs"]){
					let catalogName = catalogRule["Catalogs"][i];
					selectedCatalogs.push(catalogName);
					var $removeButton = $("<input>",{
						id: catalogName,
						type: "submit",
						name: "removeCatalogButton",
						value: "Remove"
					});
					$removeButton.click(removeCatalogHandler);
					$("#applicableCatalogsList").append($("<li>",{
						text: catalogName
					}).append($removeButton));
					$.ajax({
						type: "POST",
						url: "../scripts/courseCatalog.php",
						data: {catalogName: catalogName},
						dataType: "json",
						success: function(json) {
							courseHandler(json, catalogName);
						}
					});
				}
			}

			function attachCourseOverrideEntry(courseId, courseOverrideInfo) {
				var $removeButton = $("<input>",{
					id: courseId,
					type: "submit",
					name: "removeOverrideButton",
					value: "Remove"
				});
				$removeButton.click(removeOverrideHandler);
				$("#courseOverrideList").append($("<li>", {
					text: catalogs[courseId].name + " ",
					value: getCatalogName(courseId)
				}).append($("<label>", {
					for: "overrideCount",
					text: "Maximum Times Countable"
				})).append($("<input>", {
					id: "overrideCount",
					type: "number",
					value: courseOverrideInfo.maxCount,
					style: "width:50px"
				})).append($("<label>", {
					for: "overrideGrade",
					text: "Minimum Grade"
				})).append($("<input>", {
					id: "overrideGrade",
					type: "text",
					value: courseOverrideInfo.minGrade,
					maxlength: "2",
					pattern: "[ABCDF]{1}[-+]{0,1}",
					style: "width:50px"
				})).append($("<label>", {
					for: "overrideLowHours",
					text: "Minium Hours"
				})).append($("<input>", {
					id: "overrideLowHours",
					type: "number",
					value: courseOverrideInfo.minHours,
					style: "width:50px"
				})).append($("<label>", {
					for: "overrideHighHours",
					text: "Maximum Hours"
				})).append($("<input>", {
					id: "overrideHighHours",
					type: "number",
					value: courseOverrideInfo.maxHours,
					style: "width:50px"
				})).append($removeButton));
			}
			
			// This function will set any null entries in the override info to be the information in the catalog 
			function processOverrides(courseId, courseOverrideInfo) {
				if(!courseOverrideInfo.minGrade) {
					courseOverrideInfo.minGrade = catalogRule["Degree Program"].minGrade;
				}
				if(!courseOverrideInfo.maxCount) {
					courseOverrideInfo.maxCount = 1;
				}
				if(!courseOverrideInfo.minHours) {
					courseOverrideInfo.minHours = catalogs[courseId].lowHours;
				}
				if(!courseOverrideInfo.maxHours) {
					courseOverrideInfo.maxHours = catalogs[courseId].highHours;
				}
				return courseOverrideInfo;
			}
			
			function processCatalog(catalogArray, catalogName) {
				console.log("Processing catalog");
				if(!catalogs) {
					catalogs = {};
					catalogs = Object.assign(catalogs, catalogArray); // Make a copy since the catalogs will hold all the courses as they are loaded
					catalogsByName[catalogName] = catalogArray;
				} else {
					catalogsByName[catalogName] = catalogArray;
				 	for(var i in catalogArray) {
						catalogs[i] = catalogArray[i];
					}
				}
				catalogsLoaded++;
			
				var $courseList = $("<select>", {
					id: "courseList"
				});
				for(var courseId in catalogArray) {
					$courseList.append($("<option>",{
						value: courseId,
						text: catalogArray[courseId].prefix + " " + catalogArray[courseId].number + " : " +  catalogArray[courseId].name
					}));
				}
				$catalogs[catalogName] = $courseList;
			}
			
			function getCatalogName(courseId) {
				for(var catalogName in catalogsByName) {
					if(Object.keys(catalogsByName[catalogName]).includes(courseId)) {
						return catalogName;
					}
				}
				return "";
			}
			
			function courseHandler(catalogArray, catalogName){
				console.log(catalogArray);
				selectedOverrides = [];
				applicableCourseIds = [];
				requiredCourseIds = [];
				processCatalog(catalogArray, catalogName);
			
				// Load in options once all catalogs have been retrieved
				if(catalogsLoaded === catalogRule["Catalogs"].length) {
					//Iterate through catalog index with degreeID
					for(var i in catalogRule["Degree Program"].requiredCourses){
						requiredCourseIds.push(i);
						var $removeButton = $("<input>",{
							id: i,
							type: "submit",
							name: "removeClassButton",
							value: "Remove"
						});
						$removeButton.click(removeRequiredHandler);
						$("#classsublist").append($("<li>",{
							text: catalogs[i].name,
							value: getCatalogName(i)
						}).append($removeButton));
					}
					
					// Iterate through applicable courses and add to restricted applicable course list
					for(var i of catalogRule["Degree Program"].applicableCourses) {
						applicableCourseIds.push(i);
						var $removeButton = $("<input>",{
							id: i,
							type: "submit",
							name: "removeRestrictedClassButton",
							value: "Remove"
						});
						$removeButton.click(removeRestrictedHandler);
						$("#restrictedCourseList").append($("<li>",{
							text: catalogs[i].name,
							value: getCatalogName(i.toString())
						}).append($removeButton));
					}

					// Determine the number of applicable courses. If the number equals the catalog courses then set the radio button for the
					// entire catalog being applied. If no applicable courses are set then only the required courses option will be set. Otherwise
					// the applicable courses that are specified will be displayed.
					if(catalogRule["Degree Program"].applicableCourses.length == Object.keys(catalogs).length) {
						$("input[name='restrictedOptions']").val(["allCourses"]);
						$("#restrictedCatalogOptions").hide();
					} else if(catalogRule["Degree Program"].applicableCourses.length == 0) {
						$("input[name='restrictedOptions']").val(["requiredOnlyCourses"]);
						$("#restrictedCatalogOptions").hide();
					} else {
						$("input[name='restrictedOptions']").val(["restrictedCourses"]);
						$("#restrictedCatalogOptions").show();
					}
					
					//Iterate through any course overrides and display information
					console.log(catalogRule["Degree Program"].courseOverride);
					for(var courseId in catalogRule["Degree Program"].courseOverride) {
						var courseOverrideInfo = catalogRule["Degree Program"].courseOverride[courseId];
						courseOverrideInfo = processOverrides(courseId, courseOverrideInfo);
						selectedOverrides.push(courseId);
						attachCourseOverrideEntry(courseId, courseOverrideInfo);
					}					

					// Set the contents of the required course select
					addClassHandler();
					// Load in the minors
					var xhr = new XMLHttpRequest();
					xhr.addEventListener("load", minorsHandler);
					xhr.open("GET", "../scripts/minors.php");
					xhr.send();
				
					for(var minorIndex in catalogRule["Minor"]) {
						selectedMinors.push(catalogRule["Minor"][minorIndex].id);
						var $removeButton = $("<input>", {
							id: catalogRule["Minor"][minorIndex].id,
							type: "submit",
							name: "removeMinorButton",
							value: "Remove"
						});
						$removeButton.click(removeMinorHandler);
						$("#minorList").append($("<li>",{
							text: catalogRule["Minor"][minorIndex].name
						}).append($removeButton));
					}
					
					// Now load in the certificates
					var xhr = new XMLHttpRequest();
					xhr.addEventListener("load", certificateHandler);
					xhr.open("GET", "../scripts/certificates.php");
					xhr.send();
					
					for(var certificateIndex in catalogRule["Certificate"]) {
						selectedCertificates.push(catalogRule["Certificate"][certificateIndex].id);
						var $removeButton = $("<input>", {
							id: catalogRule["Certificate"][certificateIndex].id,
							type: "submit",
							name: "removeCertificateButton",
							value: "Remove"
						});
						$removeButton.click(removeCertificateHandler);
						$("#certificateList").append($("<li>",{
							text: catalogRule["Certificate"][certificateIndex].name
						}).append($removeButton));
					}
					
					// Load in the form
					// Now load in the certificates
					var xhr = new XMLHttpRequest();
					xhr.addEventListener("load", formHandler);
					xhr.open("GET", "../scripts/forms.php");
					xhr.send();
					
					for(var formIndex in catalogRule["Form"]) {
						selectedForms.push(catalogRule["Form"][formIndex].id);
						var $removeButton = $("<input>", {
							id: catalogRule["Form"][formIndex].id,
							type: "submit",
							name: "removeFormButton",
							value: "Remove"
						});
						$removeButton.click(removeFormHandler);
						$("#formList").append($("<li>",{
							text: catalogRule["Form"][formIndex].name
						}).append($removeButton));
					}
				}
			}

			function addClassHandler(){
				for(var i in catalogRule["Catalogs"]){
					$("#catalogList, #catalogListOverrides, #catalogListRestricted").append($("<option>",{
						value: catalogRule["Catalogs"][i],
						text: catalogRule["Catalogs"][i]
					}));
				}
				$catalogs[catalogRule["Catalogs"][0]].clone().insertAfter($("#classListLabel"));
				$catalogs[catalogRule["Catalogs"][0]].clone().insertAfter($("#classListLabelOverrides"));
				$catalogs[catalogRule["Catalogs"][0]].clone().insertAfter($("#classListLabelRestricted"));
			}
			
			function processList($globalList, $subjectList, idName, requirementList) {
				var $selectList;
				for(var objectId in requirementList) {
					// If there is no select list for the given subject then add a new option to the subject select list and create a new select list for that subject
					if(!$globalList[requirementList[objectId].subject]) {
						$subjectList.append($("<option>", {
							value: requirementList[objectId].subject,
							text: requirementList[objectId].subject
						}));
						$selectList = $("<select>", {
							id: idName
						});
						$globalList[requirementList[objectId].subject] = $selectList; // Add select list to array, key off subject
					}
					// Add the minor name to the select list belonging to that subject
					$globalList[requirementList[objectId].subject].append($("<option>", {
						value: objectId,
						text: requirementList[objectId].name
					}));
				}
			}
			
			// This will populate the select lists with minor information. There are two select lists: the list for the minor subjects and the list for the minors within that subject. 
			// The desired outcome of this code is to create select lists for each subject and add minors to those select lists when they belong to those subjects.
			function minorsHandler() {
				minors = JSON.parse(this.response);
				console.log(minors);
				var $minorSubjectList = $("#minorSubjectList");
				// Iterate through the minor list by minor id
				processList($minorsSubjectSelect, $minorSubjectList, "minorSelect", minors);
				// Initialize the minor select list shown to be the list for the selected option
				$minorsSubjectSelect[$("#minorSubjectList option:selected").val()].insertAfter($("#minorSelectLabel"));
			}
			
			
			function certificateHandler() {
				certificates = JSON.parse(this.response);
				console.log(certificates);
				var $certificateSubjectList = $("#certificateSubjectList");
				processList($certificatesSubjectSelect, $certificateSubjectList, "certificateSelect", certificates);
				// Initialize the certificate select list shown to be the list for the selected option
				$certificatesSubjectSelect[$("#certificateSubjectList option:selected").val()].insertAfter($("#certificateSelectLabel")); 
			}
			
			function formHandler() {
				forms = JSON.parse(this.response);
				console.log(forms);
				var $formSubjectList = $("#formSubjectList");
				processList($formsSubjectSelect, $formSubjectList, "formSelect", forms);
				// Initialize the form select list shown to be the list for the selected option
				$formsSubjectSelect[$("#formSubjectList option:selected").val()].insertAfter($("#formSelectLabel")); 
			}
			
			function closeAddItem() {
				var modal = document.getElementById('addNewItemModal');
				modal.style.display = "none";	
			}
			
			function closeGlobal() {
				var modal = document.getElementById('globalModal');
				modal.style.display = "none";
			}
			
			function closepopup(){
				$("#certificateList").empty();
				$("#courseOverrideList").empty();
				$("#minorList").empty();
				$("#applicableCatalogsList").empty();
				$("#classsublist").empty();
				$("#popupform").children("input[type='number']").val("");
				$("#popupform").children("input[type='number']").attr("oldvalue", "");
				$("#popupform").children("input[type='radio']:checked").prop("checked", false);
				$("#minorSelect").detach();
				$("#minorSubjectList").empty();
				$("#certificateSelect").detach();
				$("#certificateSubjectList").empty();
				$("#formSelect").detach();
				$("#formSubjectList").empty();
				$("[id='courseList']").remove();
				$("#catalogList").empty();
				$("#formList").empty();
				$("#catalogListOverrides").empty();
				$("#catalogListRestricted").empty();
				$("#classsublist").empty();
				$("#restrictedCourseList").empty();
				var modal = document.getElementById('myModal');
				modal.style.display = "none";	
			}
			
        </script>
        <style>

        </style>
    </head>
    <body>
        <div id="listContainer">

		</div>
		<div id="globalModal" class="modal">
			<div class="modal-content">
				<span onclick="closeGlobal()" class="close">&times;</span>
				<div id="globalContent">
					<label for="globalGrade">Minimum Grade: </label><input type="text" id="globalGrade" size="2" maxlength="2" pattern="([ABCDF]{1}[-+]{0,1}){0,1}">
					<label for="globalGPA">Minimum GPA: </label><input type="number" id="globalGPA" step="0.01" style="width:50px">
					<input id="saveGlobal" type="submit" value="Save"></input>
				</div>
			</div>
		</div>
		<div id="committeeModal" class="modal">
			<div class="modal-content">
				<span onclick="closeCommittee()" class="close">&times;</span>
				<div id="committeeContent">
					<h2>Merged Committees</h2>
					<ul id="mergedCommitteesList">
					
					</ul>
					Committee<select id="committeesSelect"></select><input type="button" id="addCommitteeButton" value="Merge Committees"/>
					<h2>Add Members</h2>
					Member<select id="committeeMembers"><option value="newMember">New Member</option></select>
					<span id="newCommitteeMemberContainer" hidden>
						<label for="firstName">First Name:</label><input type="text" id="firstName" style="width:100px"></input>
						<label for="lastName">Last Name:</label><input type="text" id="lastName" style="width:100px"></input>
					</span>
					Title<select id="committeeTitle" style="width:100px"></select>
					<input type="button" id="addNewCommitteeMemberButton" value="Add"></input>
					<h2>Committee</h2>
					<table id="committeeTable">
						<tbody id="committeeTableBody">
							<tr>
								<th>First Name</th>
								<th>Last Name</th>
								<th>Title</th>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div id="addNewItemModal" class="modal">
			<div class="modal-content">
				<span onclick="closeAddItem()" class="close">&times;</span>
				<div id="addNewItemContent">
					<label for="newItemCategories">Category :</label>
					<select id="newItemCategories">
				
					</select>
					<br>
					<label for="objectSubect" id="objectSubjectLabel">Subject :</label>
					<span id="newObjectSubjectSpan" hidden>
						<label for="newObjectSubject">Subject Name :</label>
						<input type="text" id="newObjectSubject"></input>
					</span>
					<br>
					<label for="newItemName">Name: </label>
					<input type="text" id="newItemName"></input>
					<br>
					<input type="button" id="addNewItemButton" value="Add"></input>
				</div>
			</div>
		</div>
		<div id="myModal" class="modal">
			<div class="modal-content">
			  <span onclick="closepopup()" class="close">&times;</span>
			  <div id="popupform">
					Required Hours: <input type="number" id="requiredHrs" style="width:50px">
					<br>
					400 Hours Minimum: <input type="number" id="400HrsMin" style="width:50px">
					<label for="400HrsMinOptionFixed">Fixed</label><input type="radio" id="400HrsMinOptionFixed" name="400HrsMinOption" value="fixed">
					<label for="400HrsMinOptionVariable">Variable</label><input type="radio" id="400HrsMinOptionVariable" name="400HrsMinOption" value="variable">
					<br>
					400 Hours Maximum: <input type="number" id="400HrsMax" style="width:50px">
					<label for="400HrsMaxOptionFixed">Fixed</label><input type="radio" id="400HrsMaxOptionFixed" name="400HrsMaxOption" value="fixed">
					<label for="400HrsMaxOptionVariable">Variable</label><input type="radio" id="400HrsMaxOptionVariable" name="400HrsMaxOption" value="variable">
					<br>
					500 Hours Minimum: <input type="number" id="500HrsMin" style="width:50px">
					<label for="500HrsMinOptionFixed">Fixed</label><input type="radio" id="500HrsMinOptionFixed" name="500HrsMinOption" value="fixed">
					<label for="500HrsMinOptionVariable">Variable</label><input type="radio" id="500HrsMinOptionVariable" name="500HrsMinOption" value="variable">
					<br>
					500 Hours Maximum: <input type="number" id="500HrsMax" style="width:50px">
					<label for="500HrsMaxOptionFixed">Fixed</label><input type="radio" id="500HrsMaxOptionFixed" name="500HrsMaxOption" value="fixed">
					<label for="500HrsMaxOptionVariable">Variable</label><input type="radio" id="500HrsMaxOptionVariable" name="500HrsMaxOption" value="variable">
					<br>
					600 Hours Minimum: <input type="number" id="600HrsMin" style="width:50px">
					<label for="600HrsMinOptionFixed">Fixed</label><input type="radio" id="600HrsMinOptionFixed" name="600HrsMinOption" value="fixed">
					<label for="600HrsMinOptionVariable">Variable</label><input type="radio" id="600HrsMinOptionVariable" name="600HrsMinOption" value="variable">
					<br>
					600 Hours Maximum: <input type="number" id="600HrsMax" style="width:50px">
					<label for="600HrsMaxOptionFixed">Fixed</label><input type="radio" id="600HrsMaxOptionFixed" name="600HrsMaxOption" value="fixed">
					<label for="600HrsMaxOptionVariable">Variable</label><input type="radio" id="600HrsMaxOptionVariable" name="600HrsMaxOption" value="variable">
					<br>
					Transfer Hours Maximum: <input type="number" id="trhrs" style="width:50px">
					<label for="TransferHrsMaxOptionFixed">Fixed</label><input type="radio" id="TransferHrsMaxOptionFixed" name="TransferHrsMaxOption" value="fixed">
					<label for="TransferHrsMaxOptionVariable">Variable</label><input type="radio" id="TransferHrsMaxOptionVariable" name="TransferHrsMaxOption" value="variable">
					<br>
					Outside Hours Maximum: <input type="number" id="ohrs" style="width:50px">
					<label for="OutsideHrsMaxOptionFixed">Fixed</label><input type="radio" id="OutsideHrsMaxOptionFixed" name="OutsideHrsMaxOption" value="fixed">
					<label for="OutsideHrsMaxOptionVariable">Variable</label><input type="radio" id="OutsideHrsMaxOptionVariable" name="OutsideHrsMaxOption" value="variable">
					<br>
					Minimum Grade: <input type="text" id="grade" style="width:50px">
					<br>
					Minimum GPA: <input type="number" id="minimumGPA" step="0.01" style="width:50px">
			  </div>
			  <div id="applicableCatalogs">
				<h2>Applicable Catalogs</h2>
				<ul id="applicableCatalogsList">
				
				</ul>
				Catalog: <select id="applicableCatalogsSelect"></select><input type="button" id="addCatalogButton" value="Add Catalog"/>
			  </div>
			  <div id="restrictedCatalog">
				<h2>Additional Creditable Courses</h2>
				<input id="allCoursesRadio" type="radio" name="restrictedOptions" value="allCourses"><label for="allCoursesRadio">Entire Catalog Applies</label><br>
				<input id="requiredOnlyRadio" type="radio" name="restrictedOptions" value="requiredOnlyCourses"><label for="requiredOnlyRadio">Required Courses Only</label><br>
				<input id="restictedCoursesRadio" type="radio" name="restrictedOptions" value="restrictedCourses"><label for="restrictedCoursesRadio">Specify Catalog Courses</label><br>
				<div id="restrictedCatalogOptions" hidden>
					<ul id="restrictedCourseList">
				
					</ul>
					Catalog: <select id="catalogListRestricted"></select><label for="classList" id="classListLabelRestricted">Class:</label><input type="button" id="addClassButtonRestricted" value="Add Class"/>
				</div>
			  </div>
			  <div id="requiredClasses">
				<h2>Required Courses</h2>
				<ul id="classsublist">

				</ul>
				Catalog: <select id="catalogList"></select><label for="classList" id="classListLabel">Class:</label><input type="button" id="addClassButton" value="Add Class"/>
			  </div>
			  <div id="overridesContainer">
				<h2>Course Overrides</h2>
				<ul id="courseOverrideList">
			  
				</ul>
			  
				Catalog: <select id="catalogListOverrides"></select><label for="classList" id="classListLabelOverrides">Class:</label><input type="button" id="addClassButtonOverrides" value="Add Class"/>
			 </div>
			 <div id="additionalOptionsContainer" hidden>
				 <div id="minorContainer">
					<h2>Applicable Minors</h2>
					<ul id="minorList">
					
					</ul>
					Subject: <select id="minorSubjectList"></select><label for="minorSelect" id="minorSelectLabel">Minor:</label><input type="button" id="addMinorButton" value="Add Minor"/>
				  </div>
				  <div id="certificateContainer">
					<h2>Applicable Certificates</h2>
					<ul id="certificateList">
					
					</ul>
					Subject: <select id="certificateSubjectList"></select><label for="certificateSelect" id="certificateSelectLabel">Certificate:</label><input type="button" id="addCertificateButton" value="Add Certificate"/>
				  </div>
				  <div id="formContainer">
					<h2>Applicable Forms</h2>
					<ul id="formList">
					
					</ul>
					Subject: <select id="formSubjectList"></select><label for="formSelect" id="formSelectLabel">Form:</label><input type="button" id="addFormButton" value="Add Form"/>
				  </div>
				  <br>
				</div>
				<input id="saveForm" type="submit" value="Save"></input>
				 <input id="deleteForm" type="button" value="Delete Program"></input>
			</div>
		</div>
    </body>
</html>
