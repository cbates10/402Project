<!DOCTYPE html>
<html>
	<link rel="stylesheet" type="text/css" href="../styles/popup.css">
    <head>
        <meta charset="utf8">
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
        <script>
			$(document).ready(function(){			
				var xhr = new XMLHttpRequest();
				xhr.addEventListener("load", degreeHandler);
				xhr.open("GET", "../scripts/degreePrograms.php");
				xhr.send();		
            });
            
			function degreeHandler() {
				console.log(this.response);
				var degreePrograms = JSON.parse(this.response);

				/* Iterate through all degree programs and add to DOM as list item */
				for(var degreeName in degreePrograms) {
					$("#masters").append($("<li>", {
						value: degreeName
					}).append($("<label>", {
						text: degreeName
					}))); 

					/* Create nested list under each degree program with the options offered, e.g., Thesis */
					var degreeOptions = $("<ul id='sublist'>");
					
					degreeOptions.append($("<li>", {
						name: "catalog"
					}).append($("<a>", {
						href: "addremove.html",
						text: "Edit Course Catalog",
						onclick: "document.cookie = 'program=" + degreeName + "'"
					})));
					
					for(var degreeOption in degreePrograms[degreeName].option) {
						degreeOptions.append($("<li>", {
							value: degreeOption,
						}).append($("<label>", {
							text: degreeOption
						})).append($("<button>", {
							value: degreePrograms[degreeName].option[degreeOption],
							name: "modifyButton",
							text: "Modify"	
						})));
					} 
					$("#masters").append(degreeOptions);
					$("button[name='modifyButton']").click(function(){
							$.ajax({
								type: "POST",
								url: "../scripts/requirements.php",
								data: {idObjects: $(this).val()},
								dataType: "json",
								success: function(json) {
									popup(json);
								}
							});
						});
				}
			}

			function popup(json){
				var modal = document.getElementById('myModal');
				modal.style.display = "block";
			}

			function closepopup(){	
				var modal = document.getElementById('myModal');
				modal.style.display = "none";	
			}

        </script>
        <style>

        </style>
    </head>
    <body>
        <div>
            <h4>Masters</h4>
            <ul id="masters">

            </ul>
		</div>
		<div id="myModal" class="modal">
			<div class="modal-content">
			  <span onclick="closepopup()" class="close">&times;</span>
			  <p>Some text in the Modal..</p>
			</div>
		</div>
    </body>
</html>
